<h1>Exemples<span class="date">29/03/2020</span></h1>

<p>
Quelques exemples de programmes en assembleurs, à commencer par un classique hello world
pour démontrer l'utilisation des boucles for (il faut copier les caractères un à un dans la VRAM).
</p>

<pre style="background-color:white;font-size:1.2em;padding:5px;" class="center three-fourths">
//EXEMPLE DE BOUCLE FOR

//init le string et les adresses
//des variables
;STR HELLO WORLD!
_INDEX 100
_CURRENT 101

//init
LSH #0x80


//boucle for : i=0; i<;STR.len; i++
LDA #0
STA #_INDEX  //i=0

.loop
LDA _INDEX
LDA $;STR
STA #_CURRENT
PSH _CURRENT  //ajoute dans la VRAM

LDA _INDEX
ADD #1          //index += 1
STA #_INDEX
SUB* #;STR.len  //compare si i<;STR.len
JN #.loop       //saute si i>=;STR.len


//raffraichir l'écran
LDA #0b10000000 //rafraichir avec mode texte
LMH #0xFF
STA #0

//halt
LJH #0xFF
JMP #0xFF

</pre>

<p>La routine de test d'interruption située à l'adresse 0x9000 :</p>
<pre style="background-color:white;font-size:1.2em;padding:5px;" class="center three-fourths">
!0x9000
;STR INTERRUPT

_INDEX 100
_FL 101

LMH #0x90
LJH #0x90

//valeur pour retour d'interruption
POP #_FL

//boucle for : i=0; i<;STR.len; i++
LDA #0
STA #_INDEX  //i=0

.loop
LDA _INDEX
LDA $;STR

LMH #0xFF
STA #1   //print char (imprimante)

LMH #0x90
LDA _INDEX
ADD #1          //index += 1
STA #_INDEX
SUB* #;STR.len  //compare si i<;STR.len
JN #.loop       //saute si i>=;STR.len

LMH #0xFF
LDA #10
STA #1   //print \n (retour à la ligne)


//retour de l'interruption
LFL _FL

</pre>
